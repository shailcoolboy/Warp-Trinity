<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">	<meta name="generator" content="ScreenSteps http://www.screensteps.com/" />	<title>XPS Intro - Implementing the software design</title>	<link href="../neutral.css" media="screen" rel="stylesheet" type="text/css" /></head><body class="lucida">	<div id="wrapper">				<div id="header">			<a id="logo" href="http://warp.rice.edu/trac/"><img src="http://warp.rice.edu/images/warpLogo.jpg" alt="Rice University WARP - Wireless Open-Access Research Platform" height="45" width="285" /></a>		</div>	<div id="mainnav" class="nav">		<ul>			<li class="first active"><a href="/trac/wiki">Home</a></li><li><a href="/forums">Forums</a></li><li><a href="/trac/browser">Browse Source</a></li>		</ul>	</div>		<div id="LessonContent">			<div class="LessonHeader">				<h1 class="LessonTitle">XPS Intro - Implementing the software design</h1>			</div>				<div class="summary">		<p>This section describes the process of adding new software application projects, customizing programs and creating the final bitstream to download to the FPGA Board.</p>	</div>							<div id="step_1" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215635100038_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215635100038.png" width="580" height="323"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215635100038_lg.png" target="_blank">Zoom</a></div></div> <p>Start by choosing <strong>Software -&gt; Add Software Application Project...</strong></p>	</div>	<div class="clear"></div>	<div id="step_2" class="lessonStep top">	    		<div class="image"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215635121668.png" width="309" height="295"></div> <p>You can name the software project anything you like. Be sure it's assigned to the <strong>ppc405_0</strong> processor. Click <strong>OK</strong>.</p>	</div>	<div class="clear"></div>	<div id="step_3" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215635149423_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215635149423.png" width="580" height="324"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215635149423_lg.png" target="_blank">Zoom</a></div></div> <p>Your new software project will show up in the <strong>Applications</strong> tab. Right-click on your project and select <strong>Mark to Initialize BRAMs</strong>. Notice that the little red X disappears from your project (and appears on the ppc405_0 bootloop). This means your project will be used to initialize the FPGA's internal memory devices. Only one project can initialize the internal memory. You can use this feature to switch between multiple software projects easily.</p>	</div>	<div class="clear"></div>	<div id="step_4" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642181254_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215642181254.png" width="580" height="394"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642181254_lg.png" target="_blank">Zoom</a></div></div> <p>Now you need to add source code to your software project. For this exercise, we've provided a source file that will blink the LEDs on the FPGA board.</p><p>If you are using FPGAv1.2 download this code from the repository; there are two files:<br /> -&nbsp;<a href="/svn/WARP/Documentation/Tutorials/XPS_Intro/code/UserIO_Demo_v1.c">UserIO_Demo_v1.c</a><br /> - <a href="/svn/WARP/Documentation/Tutorials/XPS_Intro/code/warp_userio_v1.h">warp_userio_v1.h</a></p><p>If you are using FPGAv2.2 download this code from the repository; there is just one file:<br /> - <a href="/svn/WARP/Documentation/Tutorials/XPS_Intro/code/UserIO_Demo_v2.c">UserIO_Demo_v2.c</a></p><p>Save these files to your project folder, in a sub-folder named 'src'. Then, in XPS,  right-click the <strong>Sources</strong> entry and choose <strong>Add Existing Files</strong>. Navigate to your src folder and select UserIO_Demo_v#.c. </p>	</div>	<div class="clear"></div>	<div id="step_5" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642206497_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215642206497.png" width="580" height="393"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642206497_lg.png" target="_blank">Zoom</a></div></div> <p>If you have a header file, then right-click <strong>Headers, </strong>choose <strong>Add Existing Files</strong> and select warp_userio_v1.h.</p>	</div>	<div class="clear"></div>	<div id="step_6" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642094040_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215642094040.png" width="580" height="325"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642094040_lg.png" target="_blank">Zoom</a></div></div> <p>You can expand the <strong>Sources</strong> entry and double-click the source file to see the code. There are comments throughout explaining how it works. Don't make any changes (for now). Choose <strong>Device Configuration -&gt; Update Bitstream</strong>. This will start the software compilation of the board support files, peripheral drivers and your source code.</p>	</div>	<div class="clear"></div>	<div id="step_7" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642829310_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215642829310.png" width="580" height="323"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642829310_lg.png" target="_blank">Zoom</a></div></div> <p>When the log viewer shows <strong>Memory Initialization completed successfully</strong>, your software platform and application are compiled. There's one last step before actually using your project in hardware.</p>	</div>	<div class="clear"></div>	<div id="step_8" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642918138_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215642918138.png" width="580" height="324"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642918138_lg.png" target="_blank">Zoom</a></div></div> <p>Right-click on your software application and select <strong>Generate Linker Script.</strong></p>	</div>	<div class="clear"></div>	<div id="step_9" class="lessonStep top">	    		<div class="image"><img src="images/XPS_Intro_-_Implementing_the_software_design/linker.png" width="560" height="305"></div> <p>The linker script editor controls the mapping of sections of code and data to memory resources in hardware. Each drop-down box in the <strong>Section View</strong> lists the available memory resources. In this simple design, the only memory resources are the Data On-Chip Memory (DOCM) and Instruction On-Chip Memory (IOCM) devices. The default selections are valid in this case. Click <strong>OK</strong>.</p>	</div>	<div class="clear"></div>	<div id="step_10" class="lessonStep top">	    		<div class="image"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642967316_lg.png" class="image" target="_blank"><img src="images/XPS_Intro_-_Implementing_the_software_design/media_1215642967316.png" width="580" height="323"></a><div class="caption"><a href="images/XPS_Intro_-_Implementing_the_software_design/media_1215642967316_lg.png" target="_blank">Zoom</a></div></div> <p>Now that you have a fully synthesized hardware platform, compiled software platform and valid linker script, you can run <strong>Update Bitstream</strong> one last time. When this is finished, you're ready to download the file <strong>/implementation/download.bit</strong> to your FPGA board.</p>	</div>	<div class="clear"></div>		</div>		<div id="lessonNavigation">			<table>				<tr>					<td class="lessonNav_Left"><a href="XPS_Intro_-_Implementing_the_hardware_platform.html">&lt;&lt; XPS Intro - Implementing the hardware platform</a></td>					<td class="lessonNav_TOC"><a href="../XPS_Intro.html">Top</a></td>					<td class="lessonNav_Right"></td>				</tr>			</table>		</div>	</div>	</body></html>